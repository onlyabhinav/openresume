<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abhinav - Technical Lead Resume</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:Arial,sans-serif;line-height:1.6;color:#333;background:#f5f5f5;padding:20px}
        .controls{max-width:850px;margin:0 auto 20px;text-align:right}
        .download-btn{background:#2563eb;color:#fff;border:none;padding:12px 24px;font-size:14px;border-radius:6px;cursor:pointer;font-weight:600}
        .download-btn:hover{background:#1d4ed8}
        .container{max-width:850px;margin:0 auto;background:#fff;padding:50px 60px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
        .header{border-bottom:3px solid #2563eb;padding-bottom:20px;margin-bottom:30px}
        .header h1{font-size:2.5em;color:#1e293b;margin-bottom:8px}
        .header .title{font-size:1.3em;color:#2563eb;margin-bottom:15px;font-weight:600}
        .contact-info{display:flex;flex-wrap:wrap;gap:20px;font-size:.95em;color:#64748b}
        .contact-info a{color:#2563eb;text-decoration:none}
        .contact-info a:hover{text-decoration:underline}
        .section{margin-bottom:35px}
        .section h2{font-size:1.4em;color:#1e293b;margin-bottom:15px;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid #e2e8f0;padding-bottom:8px}
        .summary{font-size:1em;line-height:1.7;color:#475569;text-align:justify}
        .skills-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}
        .skill-item{display:flex;align-items:start}
        .skill-item strong{min-width:150px;color:#1e293b;font-size:.95em}
        .skill-item span{color:#475569;font-size:.95em}
        .experience-item,.achievement-item{margin-bottom:25px}
        .experience-item h3,.achievement-item h3{font-size:1.15em;color:#1e293b;margin-bottom:5px}
        .experience-item .meta{color:#64748b;font-size:.9em;margin-bottom:10px;font-style:italic}
        .experience-item ul,.achievement-item ul{margin-left:20px;margin-top:8px}
        .experience-item li,.achievement-item li{margin-bottom:6px;color:#475569;font-size:.95em;line-height:1.6}
        .error{padding:40px;text-align:center;color:#666}
        .error h3{color:#dc2626;margin-bottom:15px}
        .error code{background:#f1f5f9;padding:2px 8px;border-radius:4px;font-size:.9em}
        @media print{body{background:#fff;padding:0}.controls{display:none}.container{box-shadow:none;padding:30px;max-width:100%}}
        @media(max-width:768px){.container{padding:30px 25px}.header h1{font-size:2em}.skills-grid{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <div class="controls">
        <button class="download-btn" onclick="downloadPDF()">üì• Download PDF</button>
    </div>
    <div class="container" id="resume">
        <div style="padding:40px;text-align:center;color:#666">Loading...</div>
    </div>

    <script>
    // Configuration - change this to your JSON file location
    const DATA_FILE = 'resume-data.json';

    function render(d) {
        document.getElementById('resume').innerHTML = `
            <div class="header">
                <h1>${d.profile.name}</h1>
                <div class="title">${d.profile.title}</div>
                <div class="contact-info">
                    <span>üìß <a href="mailto:${d.profile.email}">${d.profile.email}</a></span>
                    <span>üì± ${d.profile.phone}</span>
                    <span>üíº <a href="https://${d.profile.linkedin}" target="_blank">LinkedIn</a></span>
                    <span>üìç ${d.profile.location}</span>
                </div>
            </div>
            <div class="section">
                <h2>Professional Summary</h2>
                <p class="summary">${d.profile.summary}</p>
            </div>
            <div class="section">
                <h2>Core Competencies</h2>
                <div class="skills-grid">
                    ${d.skills.map(s => `<div class="skill-item"><strong>${s.category}:</strong><span>${s.items}</span></div>`).join('')}
                </div>
            </div>
            <div class="section">
                <h2>Professional Experience</h2>
                ${d.experience.map(e => `
                    <div class="experience-item">
                        <h3>${e.title}</h3>
                        <div class="meta">${e.company} | ${e.period}</div>
                        <ul>${e.responsibilities.map(r => `<li>${r}</li>`).join('')}</ul>
                    </div>
                `).join('')}
            </div>
            <div class="section">
                <h2>Key Achievements</h2>
                ${d.achievements.map(a => `
                    <div class="achievement-item">
                        <h3>${a.title}</h3>
                        <ul>${a.points.map(p => `<li>${p}</li>`).join('')}</ul>
                    </div>
                `).join('')}
            </div>`;
    }

    function showError(msg) {
        document.getElementById('resume').innerHTML = `
            <div class="error">
                <h3>‚ö†Ô∏è Could not load resume data</h3>
                <p>${msg}</p>
                <br>
                <p><strong>To fix this:</strong></p>
                <p>1. Make sure <code>${DATA_FILE}</code> is in the same folder</p>
                <p>2. Serve files from a web server (see instructions below)</p>
                <br>
                <p style="font-size:.85em;color:#888">
                    Quick local server options:<br>
                    ‚Ä¢ Python: <code>python -m http.server 8000</code><br>
                    ‚Ä¢ Node: <code>npx serve</code><br>
                    ‚Ä¢ VS Code: Use "Live Server" extension
                </p>
            </div>`;
    }

    function downloadPDF() {
        const s = document.createElement('script');
        s.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js';
        s.onload = () => {
            html2pdf().set({
                margin: 0.5,
                filename: 'Abhinav_Resume.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
            }).from(document.getElementById('resume')).save();
        };
        document.head.appendChild(s);
    }

    // Load data from external JSON file
    fetch(DATA_FILE)
        .then(r => {
            if (!r.ok) throw new Error('File not found');
            return r.json();
        })
        .then(render)
        .catch(e => showError(e.message));
    </script>
</body>
</html>